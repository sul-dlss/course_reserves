<% uuid = SecureRandom.uuid %>
<div class="reserve d-flex">
	<div class="enumerator"><span class="counter"></span></div>
	<div class="container">
		<div class="d-flex mb-2">
			<div class="">
				<% if item_in_searchworks?(item) %>
		      <p class="h5">
		        <%= link_to item['title'], "https://searchworks.stanford.edu/view/#{item['ckey']}", rel: 'noopener', target: '_blank' %>
		      </p>
		      <% if item['imprint'] %>
		        <p class="mb-1"><%= item['imprint'] %></p>
		      <% end %>
			    <% if item['online'] %>
			      <p class="mb-1"><span class="badge badge-success" aria-hidden="true">Online</span> Full text available online</p>
			    <% end %>
				<% else %>
					<label for="item-title-<%= uuid %>">Title</label>
					<textarea id="item-title-<%= uuid %>" aria-label="title" cols="60" rows="5" class="form-control" name="reserve[item_list][<%= uuid %>][title]"><%= item["title"] %></textarea>
		  	<% end %>
		    <input type="hidden" name="reserve[item_list][<%= uuid %>][imprint]" value="<%= item["imprint"] if item["imprint"] %>" />
		  	<input type="hidden" name="reserve[item_list][<%= uuid %>][title]" value="<%= item["title"] if item["title"] %>" />
		  	<input type="hidden" name="reserve[item_list][<%= uuid %>][ckey]" value="<%= item["ckey"] if item["ckey"] %>" />
		    <input type="hidden" name="reserve[item_list][<%= uuid %>][media]" value="<%= item['media'] if item['media'] %>" />
		    <input type="hidden" name="reserve[item_list][<%= uuid %>][online]" value="<%= item['online'] if item['online'] %>" />
			</div>
			<div class=""><%= link_to "[delete]", "", class: "delete", method: 'delete' -%></div>
		</div>
		<div>
			<hr />
			<div class="form-group d-flex flex-column flex-md-row mb-3 mb-sm-2">
				<div class="d-flex">
					<label for="item-copies-<%= uuid %>" class="col-form-label">Print copies needed: </label>
					<input id="item-copies-<%= uuid %>" type="number" class="num_copies form-control" name="reserve[item_list][<%= uuid %>][copies]" value="<%= item["copies"] || (item['online'] ? 0 : 1) %>" max="99" />
				</div>

				<label class="col-form-label"><input type="checkbox" name="reserve[item_list][][personal]" value="true" <%= "checked='checked'".html_safe if item["personal"] %> /> The instructor will loan a copy to the library</label>
			</div>

			<div class="form-group d-flex mb-2">
				<label for="item-loan-period-<%= uuid %>" class="col-form-label">Loan period: </label>
				<select id="item-loan-period-<%= uuid %>" class="loan-period form-control loan-select<%= " media" if item["media"] == "true" %>" name="reserve[item_list][][loan_period]" <%= "disabled='disabled'".html_safe if item["media"] == "true" %>>
					<%- Settings.loan_periods.to_h.values.each do |lp| -%>
						<option<%= " selected" if lp == item["loan_period"] %>><%= lp %></option>
					<%- end -%>
				</select>
			</div>

			<div class="form-group d-flex flex-column flex-md-row mb-2">
				<div class="col-form-label pb-0">Is this a required or recommended text?</div>
				<div class="d-flex flex-column mx-3">
					<label class="col-form-label pt-0 pt-md-2 pb-0"><input type="radio" name="reserve[item_list][][required]" value="true" <%= "checked='checked'".html_safe if item["required"].blank? || item["required"] == "true" %> /> Required</label>
					<label class="col-form-label pt-0"><input type="radio" name="reserve[item_list][][required]" value="false" <%= "checked='checked'".html_safe if item["required"] == "false" %> /> Recommended</label>
				</div>
			</div>

			<div class="form-group">
				<% if item_in_searchworks?(item) %>
					<label for="item-comment-<%= uuid %>" class="col-form-label mt-0">Comments</label>
					<textarea id="item-comment-<%= uuid %>" aria-label="comment" cols="60" rows="2" class="form-control" name="reserve[item_list][<%= uuid %>][comment]"><%= item["comment"] %></textarea>
				<% end %>
			</div>
	  </div>
	</div>
</div>
